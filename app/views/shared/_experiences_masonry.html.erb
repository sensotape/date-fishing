<div class="grid">

  <% experiences.each do |experience| %>

    <!-- GRID ITEM -->
    <a href='/experiences/<%= experience.id %>' class="grid-item" data-effect="zoom">
      <!-- PHOTO -->
      <div class="grid-image-background">
        <div class="grid-image">
          <%= cl_image_tag experience.photos.first.picture, alt: experience.title %>
        </div>
        <div class="grid-avatar">
          <%= cl_image_tag experience.user.photos.first.picture %>
          <p><%= experience.user.first_name %></p>
        </div>
      </div>

      <!-- TEXT CONTAINER -->
      <div class="grid-text-container">

        <!-- TITLE -->
        <div class="grid-text-title">
          <%= experience.title %>
        </div>

        <!-- DATE -->
        <div class="grid-text-date">
          <%= experience.humanize_date_shorthand %>
        </div>

      </div>
    </a>

  <% end %>
</div>

<script>
  var $grid = $('.grid').masonry({
    itemSelector: '.grid-item',
    columnWidth: 5,
    fitWidth: true
  });

  $grid.imagesLoaded().progress( function() {
    $grid.masonry('layout');
  });
</script>

<!-- PREVIOUS SCRIPT -->
<!-- <script>
  $('.grid').masonry({
    itemSelector: '.grid-item',
    columnWidth: 5,
    fitWidth: true
  });
</script>
 -->
